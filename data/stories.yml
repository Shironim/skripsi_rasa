version: "3.1"

stories:

- story: User mencari produk secara random dan menyewa 1 produk
  steps:
  - intent: tanya_produk
  - action: search_product_form
  - active_loop: search_product_form
  - active_loop: null
  - action: utter_submit_search_product
  - action: action_fetch_search_product
  - slot_was_set:
    - product_fetch_avaliable: True
  - action: utter_product_available
  - action: utter_menawarkan_untuk_disewa
  - slot_was_set:
    - product_fetch_avaliable: True
  - intent: konfirmasi_sewa
  - action: action_confirm_to_rent
  - slot_was_set:
    - id_product_cart: [11]
    - confirm_to_rent: True
  - action: utter_bertanya_kebutuhan_lainnya
  - slot_was_set:
    - product_fetch_avaliable: False
  - intent: menolak
  - action: action_confirm_search_another_product
  - slot_was_set:
    - want_to_rent_another_product: False
  - action: rent_product_form
  - active_loop: rent_product_form
  - active_loop: null
  - slot_was_set:
    - requested_slot: null
  - action: utter_submit_rent_product
  - action: action_send_email_invoice

- story: User mencari produk secara random dan produk tidak ditemukan
  steps:
  - intent: tanya_produk
  - action: search_product_form
  - active_loop: search_product_form
  - active_loop: null
  - action: utter_submit_search_product
  - action: action_fetch_search_product
  - slot_was_set:
    - product_fetch_avaliable: False
  - action: utter_bertanya_kebutuhan_lainnya

- story: User mencari produk secara random dan tidak jadi menyewa
  steps:
  - intent: tanya_produk
  - action: search_product_form
  - active_loop: search_product_form
  - active_loop: null
  - action: utter_submit_search_product
  - action: action_fetch_search_product
  - slot_was_set:
    - product_fetch_avaliable: True
  - action: utter_product_available
  - action: utter_menawarkan_untuk_disewa
  - slot_was_set:
    - product_fetch_avaliable: True
  - intent: menolak
  - action: action_confirm_to_rent
  - slot_was_set:
    - id_product_cart: null
    - confirm_to_rent: False
  - action: action_selesai_percakapan

- story: User mencari produk secara random dan mencari lagi ke 2 kali, tapi gak jadi menyewa alat ke 2
  steps:
  - intent: tanya_produk
  - action: search_product_form
  - active_loop: search_product_form
  - active_loop: null
  - action: utter_submit_search_product
  - action: action_fetch_search_product
  - slot_was_set:
    - product_fetch_avaliable: True # -> ada produk yang tersedia # gimana jika produk tidak tersedia ?
  - action: utter_product_available
  - action: utter_menawarkan_untuk_disewa
  - slot_was_set:
    - product_fetch_avaliable: True
  - intent: konfirmasi_sewa
  - action: action_confirm_to_rent
  - slot_was_set:
    - id_product_cart: [11]
    - confirm_to_rent: True
  - action: utter_bertanya_kebutuhan_lainnya # perlu ada set confirm_to_rent: False
  - slot_was_set:
    - product_fetch_avaliable: False
  - intent: konfirmasi_sewa
  - action: action_confirm_search_another_product
  - slot_was_set:
    - want_to_rent_another_product: True
  - action: utter_ask_another_product
  - intent: tanya_produk
  - action: search_product_form
  - active_loop: search_product_form
  - active_loop: null
  - action: utter_submit_search_product
  - action: action_fetch_search_product
  - slot_was_set:
    - product_fetch_avaliable: True
  - action: utter_product_available
  - action: utter_menawarkan_untuk_disewa
  - slot_was_set:
    - product_fetch_avaliable: True
  - intent: menolak
  - action: action_confirm_to_rent
  - slot_was_set:
    - id_product_cart: [11]
    - confirm_to_rent: False
  - action: rent_product_form
  - active_loop: rent_product_form
  - active_loop: null
  - slot_was_set:
    - requested_slot: null
  - action: utter_submit_rent_product
  - action: action_send_email_invoice

# TODO 
# - sending email invoice to user
# - reset all slot when, 1. utter_selesai_percakapan and 2. action_send_email_invoice
# - add database Merk, Series

    # add story, ask of user want to rent another product
    # setelah konfirmasi sewa -> masukan ke product_cart, terus tanya, mau sewa lainnya lagi?
    # jika IYA, maka tanyakan mau sewa apa lagi ? disini want_to_rent_another_product set to false
    # setelah itu, tanyakan lagi, mau sewa lagi ?
    # setelah jawaban tidak untuk sewa alat yang lain, maka arahkan ke form untuk mengisi data diri, dan kirimkan invoice ke email user
  # - action: rent_product_form
  # - active_loop: rent_product_form
  # - active_loop: null
  # - intent: konfirmasi_sewa
  # - action: action_confirm_to_rent
  # - action: utter_submit_rent_product
  # - action: action_send_email_invoice

# - story: User mencari produk secara random + tidak jadi menyewa
#   steps:
#   - intent: sapaan_pembuka
#   - action: action_sapaan
#   - intent: tanya_produk
#   - action: search_product_form
#   - active_loop: search_product_form
#   - active_loop: null
#   - action: utter_submit_search_product
#   - action: action_fetch_search_product
#   - intent: deny
#   - action: utter_menawarkan_produk_lainnya

  # - intent: informasi_user
  #   entities:
  #   - nama: null
  #   - email: null
  #   - tanggal_pengambilan: null
  #   - tanggal_pengembalian: null
  # - action: action_konfirmasi_pesanan # -> menampilkan informasi pesanan, dan bertanya apakah sudah benar
  # - intent: konfirmasi_pesanan
  # - action: action_konfirmasi_pesanan # -> menyimpan pesanan ke database & mengirimkan email invoice ke user

# - story: User mencari produk secara random + tidak jadi menyewa
#   steps:
#   - intent: sapaan_pembuka
#   - action: action_sapaan
#   - intent: testing_saja
#   - action: utter_testing_saja
#   - intent: tanya_produk
#     entities:
#     - merk: null
#     - category: null
#     - series: null
#   - slot_was_set:
#     - merk: null
#     - category: null
#     - series: null
#   - action: action_tanya_produk
#   - action: utter_menawarkan_untuk_disewa
#   - intent: deny
#   - action: utter_menawarkan_produk_lainnya # -> menyimpan dalam slot array, produk yang ingin disewa



  # - intent: pembayaran
  # - action: utter_pembayaran

# - story: User bertanya bagaimana mekanisme pengambilan dan ketentuan lainnya
#   steps:
#   - intent: sapaan_pembuka
#   - action: action_sapaan
#   - intent: syarat_sewa
#   - action: utter_syarat_sewa
#   - intent: pengembalian_alat
#     entities:
#     - terlambat: true
#     - pengembalian: true
#   - slot_was_set:
#     - terlambat: null
#     - pengembalian: null
#   - action: action_resp_pengembalian_alat

# - story: User bertanya apakah produk tersedia untuk disewa atau tidak
#   steps:
#   - intent: sapaan_pembuka
#   - action: action_sapaan
#   - intent: ask_available_product
#   - action: utter_ask_available_product # -> search for product in database and return available or not
#   - action: utter_menawarkan_untuk_disewa # -> 
#   - intent: # iyaa, saya mau menyewa produk itu


# - story: User bertanya spesifikasi produk
# - story: User mencari produk dengan spesifikasi tertentu
# - story: User ingin menyewa produk
#   step: 

# - story: User bertanya dimana lokasi tempat pengambilan
# - story: User bertanya cara pembayaran

  
  # produk yang akan dimasukan
  # - kamera
  # - lensa
  # - lighting
  # - stand tripod
  # - monitor
  # - lain lain (converter, kabel, splitter, video capture)

  # ada kamera merk apa saja ?
  # kamera yang bisa mengambil jarak jauh ?
  # kamera yang bisa mengambil gambar pada malam hari
  # kamera yang bisa ada efek blur nya dari belakang objek
  # berapa harga kamera ini ?
  # kameranya tersedia apa enggak ?
  # dimana lokasi ambil kameranya ?
  # saya bayar dp diawal atau setelah ambil kameranya ?
  # apakah perlu bayar dp dulu ?
  # apakah ada syarat dan ketentuan untuk menyewa kamera ?

- story: interactive_story_1
  steps:
  - intent: sapaan_pembuka
  - action: action_sapaan
  - intent: tanya_produk
    entities:
    - category: kamera
    - merk: nikon
    - series: d500
    - category: kamera
    - series: d500
    - merk: nikon
  - slot_was_set:
    - merk: nikon
  - slot_was_set:
    - category: kamera
  - slot_was_set:
    - series: d500
  - action: search_product_form
  - active_loop: search_product_form
  - slot_was_set:
    - merk: nikon
  - slot_was_set:
    - category: kamera
  - slot_was_set:
    - series: d500
  - slot_was_set:
    - requested_slot: null
  - active_loop: null
  - action: utter_submit_search_product
  - action: action_fetch_search_product
  - slot_was_set:
    - product_fetch_avaliable: true
  - slot_was_set:
    - product_fetch:
      - id_produk: 11
        nama: Camera Nikon D500
        merk: Nikon
        harga: '350'
        thumbnail: kamera_nikon_d500.jpeg
        deskripsi: Memenuhi unggulan DX baru, yang D500 Nikon. Sekilas, kelihatannya tidak mengejutkan - tapi terkandung di dalam bodi kamera yang ramping adalah kekuatan besar yang sesungguhnya dari pemrosesan dan kemajuan teknologi. D500 siap untuk pergi ke mana pun gairah Anda menuntun Anda, menangkap segala sesuatu dengan kejelasan, kecepatan dan resolusi yang menakjubkan
        type_produk: kamera
        spesifikasi_detail: '{"dimensi": "147 x 115 x 81 mm","weight": "760 gr", "iso": "100 - 6400", "shutter": "30 - 1/8000 seconds", "file_format": "JPEG", "memory_card_type": "SD, SDHC, SDXC"}'
        status: tersedia
  - action: utter_product_available
  - action: utter_menawarkan_untuk_disewa
  - intent: menolak
  - action: action_confirm_to_rent
  - slot_was_set:
    - confirm_to_rent: false
  - slot_was_set:
    - product_fetch: null
  - slot_was_set:
    - product_fetch_avaliable: false
  - slot_was_set:
    - category: null
  - slot_was_set:
    - merk: null
  - slot_was_set:
    - series: null
  - action: action_selesai_percakapan
